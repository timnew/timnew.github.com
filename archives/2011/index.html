<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Archives: 2011 | ThoughtWorkshop</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="timnew programming code software">
<meta property="og:type" content="website">
<meta property="og:title" content="ThoughtWorkshop">
<meta property="og:url" content="http://timnew.me/archives/2011/index.html">
<meta property="og:site_name" content="ThoughtWorkshop">
<meta property="og:description" content="timnew programming code software">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ThoughtWorkshop">
<meta name="twitter:description" content="timnew programming code software">
<meta name="twitter:creator" content="@timnew">
<link rel="publisher" href="108780866821209050000">
  
    <link rel="alternate" href="/atom.xml" title="ThoughtWorkshop" type="application/atom+xml">
  
  <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
<link rel="icon" type="image/png" href="/favicon-196x196.png" sizes="196x196">
<link rel="icon" type="image/png" href="/favicon-160x160.png" sizes="160x160">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<meta name="msapplication-TileColor" content="#00a300">
<meta name="msapplication-TileImage" content="/mstile-144x144.png">

  <!-- <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"> -->
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-30567867-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">ThoughtWorkshop</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Digital Bigs in my thought</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/#main">Home</a>
        
          <a class="main-nav-link" href="/archives/">Archives</a>
        
          <a class="main-nav-link" href="/photos/500px.html">Photos</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="Flux RSS"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Rechercher"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://timnew.me"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-remote-desktop-from-win-to-mac-via-chrome-remote-desktop" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2011/10/13/remote-desktop-from-win-to-mac-via-chrome-remote-desktop/" class="article-date">
  <time datetime="2011-10-13T00:00:00.000Z" itemprop="datePublished">2011-10-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/geek-toy/">Geek Toy</a>
  </div>

  </div>
  <div class="article-inner">
    
  
  <div class="ribbon-wrapper relative right">
    <div class="ribbon "  style="background-color: #A0A;"  >
      <a href="http://timnew.me/categories/geek-toy/">Geek Toy</a>
    </div>
  </div>


    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2011/10/13/remote-desktop-from-win-to-mac-via-chrome-remote-desktop/">Remote Desktop from Win to Mac via Chrome Remote Desktop</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Google Chrome Remote Desktop Extension is really amazing!!!!!<br>I try to install the extension on both Chrome on my iMac and the one on my laptop with Win 7.<br>Then I try to connect the iMac from Win 7 via Chrome Remote Desktop!<br>The performance is really amazing!!!! It is less well than Windows RDP but much better than the famous but sucks VNC!!!!!<br>I totally have no idea how Google implemented this! But it do works super well in my environment!</p>
<img src="/blog/2011/10/13/remote-desktop-from-win-to-mac-via-chrome-remote-desktop/Chrome-Remote-Desktop-Control-Mac.png" alt="Chrome Remote Desktop to Mac" title="Chrome Remote Desktop to Mac">
<p>You know, before Chrome Remote Desktop, there is only one real cross platform remote desktop solution: VNC, and the performance of which is unacceptable poor, and we have to install a lot of ugly software to make it happen.<br> But now, we can achieve it by simply install chrome and the chrome extension….<br>It is amazing!</p>
<p>I found the desktop fade in animation works smoothly via remote desktop! And I can even play movie from Mac!!!!!</p>
<img src="/blog/2011/10/13/remote-desktop-from-win-to-mac-via-chrome-remote-desktop/Chrome-Remote-Desktop-Play-Video.png" alt="Play Movie on Mac via Chrome Remote Desktop" title="Play Movie on Mac via Chrome Remote Desktop">
<p>While playing video, the peak of the network traffic might be reach 800kBps to 1MBps… but normally it should be 300 kBps…..</p>
<p>But since it is only the beta version, so there are some limitations in Chrome Remote Desktop:</p>
<ol>
<li>The Hotkey doesn’t work well, which means you cannot Press Cmd+Space to pop up quick-silver or spot-light…</li>
<li>Mouse Wheel doesn’t work well, which means you cannot scroll the page with your mouse wheel, or magic mouse.</li>
<li>Sound doesn’t bring to remote side, if you wanna play movie with Chrome Remote Desktop, then you might be have to read the subtitle rather than hear the speech.</li>
<li>CPU consuming is high, I guess Chrome Remote Desktop spend a lot of CPU power on compressing the data to be transferred, so the CPU consuming is higher than other Remote Desktop solution……</li>
</ol>
<p>And special Precondition required for Chinese Netizens:<br>If you are try to use Chrome Remote Desktop in China, this miracle land, you might need some other special technology tool to help you get rid of the famous GFW. To my experience, sometimes Remote Desktop OAuth might be blocked by GFW.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://timnew.me/blog/2011/10/13/remote-desktop-from-win-to-mac-via-chrome-remote-desktop/" data-id="cinedk6zo000nchsimpsfwd3s" class="article-share-link">Partager</a>
      
        <a href="http://timnew.me/blog/2011/10/13/remote-desktop-from-win-to-mac-via-chrome-remote-desktop/#disqus_thread" class="article-comment-link">Commentaires</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/chrome/">chrome</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/google/">google</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/remote-desktop/">remote desktop</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/remoting/">remoting</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-tdd-vs-natural-selection-part-ii" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2011/09/16/tdd-vs-natural-selection-part-ii/" class="article-date">
  <time datetime="2011-09-16T00:00:00.000Z" itemprop="datePublished">2011-09-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/thinking/">Thinking</a>
  </div>

  </div>
  <div class="article-inner">
    
  
  <div class="ribbon-wrapper relative right">
    <div class="ribbon "  style="background-color: #06A;"  >
      <a href="http://timnew.me/categories/thinking/">Thinking</a>
    </div>
  </div>


    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2011/09/16/tdd-vs-natural-selection-part-ii/">TDD vs Natural Selection : Part II</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>As discussed in <a href="/Thinking/2011/09/14/tdd-vs-natural-selection/">previous part</a>, both TDD and natural selection can produce suitable designs. But there are costs.<br>The design from natural selection is just perfect, but the cost is 99% unsuitable species die out. It is the cost of life.<br>Same to TDD, except TDD isn’t so cruel. If you try to write a piece of code in TDD and pure factoring way, which means all the designs are in order to eliminate smell. And you might find that to eliminate the smell sometime is not so easy that you can have it done in minutes. You might need several tries to find out the most proper approach, since you might find that you just introduced a new, and maybe more serious smell while you eliminating a smell. Sometimes you might find that the upcoming new smells just drive into a dead road, and you just want revert the changes and retry from a fresh start. In worst case, you might find you can hardly find the right way, and you just got lost in the code.<br>In some simple project, you might find the situation is just acceptable, but in some complex project, you can hardly do that or you might find at the  end of the day you and your pair produced nothing with great effort.</p>
<p>So in my opinion, TDD doesn’t mean no design at all. When you practicing TDD, you must focus on the detailed code. At this time if you can easily got lost without the guide from a clear, more general, high level vision. It just works like the architecture design or general solution to specific type of problem.</p>
<p>Such design can save you tons of time wasted on times of retries.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://timnew.me/blog/2011/09/16/tdd-vs-natural-selection-part-ii/" data-id="cinedk6zn000mchsicjrz3pvr" class="article-share-link">Partager</a>
      
        <a href="http://timnew.me/blog/2011/09/16/tdd-vs-natural-selection-part-ii/#disqus_thread" class="article-comment-link">Commentaires</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tdd/">TDD</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/design/">design</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/methodology/">methodology</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-tdd-vs-natural-selection" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2011/09/14/tdd-vs-natural-selection/" class="article-date">
  <time datetime="2011-09-14T00:00:00.000Z" itemprop="datePublished">2011-09-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/thinking/">Thinking</a>
  </div>

  </div>
  <div class="article-inner">
    
  
  <div class="ribbon-wrapper relative right">
    <div class="ribbon "  style="background-color: #06A;"  >
      <a href="http://timnew.me/categories/thinking/">Thinking</a>
    </div>
  </div>


    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2011/09/14/tdd-vs-natural-selection/">TDD vs Natural Selection</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>After practiced TDD for almost a month, I guess I began to understand why TDD can possibly generate the best suitable design, although there is no one actually did the design work. It is interesting that if something is not intended to be done but actually has been done finally. It means that the design is actually done gradually and silently during the TDD process.<br>I always wondering what actually happened leads to such a result. Then I guess I have found the answer from Darwin’s theory. Think about the various lives on the planet, there is no one who designed them, but they are just so reasonable and harmony with the environment.<br>Why? Natural selection!<br>Natural selection ensures a trend of the life evolution, which makes the life to be more and more suitable to the environment, by serious survival tests. Unsuitable life just died out, the remained are the suitable.<br>Comparing to natural selection, you can find the similar gene in TDD. They both got tests and the test result eliminates the unsuitable design, which actually drives the design more and more fit to the requirements in a most efficient way.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://timnew.me/blog/2011/09/14/tdd-vs-natural-selection/" data-id="cinedk6zj000jchsit9r3ze6r" class="article-share-link">Partager</a>
      
        <a href="http://timnew.me/blog/2011/09/14/tdd-vs-natural-selection/#disqus_thread" class="article-comment-link">Commentaires</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tdd/">TDD</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/design/">design</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/methodology/">methodology</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-fluentassertion-is-not-compatible-with-xunit-extensions" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2011/09/14/fluentassertion-is-not-compatible-with-xunit-extensions/" class="article-date">
  <time datetime="2011-09-14T00:00:00.000Z" itemprop="datePublished">2011-09-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">Programming</a>►<a class="article-category-link" href="/categories/programming/c/">C#</a>
  </div>

  </div>
  <div class="article-inner">
    
  
  <div class="ribbon-wrapper relative right">
    <div class="ribbon "  style="background-color: #40A;"  >
      <a href="http://timnew.me/categories/programming/">Programming</a>
    </div>
  </div>


    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2011/09/14/fluentassertion-is-not-compatible-with-xunit-extensions/">FluentAssertion is not compatible with xUnit.Extensions</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>I met a weird problem that I found the Resharper Test Runner hangs when I introduced theory test case in my unit test.<br>After some spikes, I found the problem seems caused by the incompatibility between <a href="http://fluentassertions.codeplex.com/" target="_blank" rel="external">Fluent Assertion</a> and <a href="http://xunit.codeplex.com/" target="_blank" rel="external">xUnit.Extension</a>.<br>It is wired, and there seems to be no quick fix.<br>So I replace the Fluent Assertion with Should and <a href="http://should.codeplex.com/" target="_blank" rel="external">Should.Fluent</a>, which is a port of <a href="http://code.google.com/p/shouldit/" target="_blank" rel="external">ShouldIt</a>.<br>After that, everything goes well except the syntax between Fluent Assertion and Should Fluent are not compatible with each other, although they’re really similar.<br>But Should.Fluent doesn’t support <code>something.Should.Be()</code>, it requires <code>something.Should.Be.Equals()</code>, which is really annoying to me.</p>
<p>According to the Fluent’s introduction, Fluent is a direct fork of xUnit. And I’m not sure what’s the impact caused by this.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://timnew.me/blog/2011/09/14/fluentassertion-is-not-compatible-with-xunit-extensions/" data-id="cinedk6zh000ichsiie7qk4bm" class="article-share-link">Partager</a>
      
        <a href="http://timnew.me/blog/2011/09/14/fluentassertion-is-not-compatible-with-xunit-extensions/#disqus_thread" class="article-comment-link">Commentaires</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/should-fluent/">Should.Fluent</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shouldit/">ShouldIt</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/compatibility/">compatibility</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/extension/">extension</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/fluent-assertion/">fluent assertion</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/library/">library</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/test/">test</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/unit-test/">unit test</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/xunit/">xUnit</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-push-data-flow-model-in-c-4-0" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2011/05/25/push-data-flow-model-in-c-4-0/" class="article-date">
  <time datetime="2011-05-25T00:00:00.000Z" itemprop="datePublished">2011-05-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">Programming</a>►<a class="article-category-link" href="/categories/programming/c/">C#</a>
  </div>

  </div>
  <div class="article-inner">
    
  
  <div class="ribbon-wrapper relative right">
    <div class="ribbon "  style="background-color: #40A;"  >
      <a href="http://timnew.me/categories/programming/">Programming</a>
    </div>
  </div>


    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2011/05/25/push-data-flow-model-in-c-4-0/">Push Data Flow Model in C# 4.0</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In the pre 4.0 era, there are two interfaces reveal a new world to .net world. The two hero are <code>IEnumerable&lt;T&gt;</code> and <code>IEnumerator&lt;T&gt;</code>.<br>Based on these two interfaces, .net introduced a lot of amazing staffs that dramatically simplified the development related to data flow, these well known features are: foreach loop, yield keyword, and LINQ.<br>These 2 interfaces provide an common abstraction layer for the operation that pull data from the data source. And with this abstraction, you can apply foreach loop to almost every kind of data source in the .net world.<br><code>IEnumerable&lt;T&gt;</code> and <code>IEnumerator&lt;T&gt;</code> are cool, but they are somehow not so convenient to use in some cases, such as in asynchronous context or in obvious latency environment.<br>And the pull data flow model also has a capable brother, the push data flow, which can fill up the gap that pull model left for us.</p>
<p>So in .net 4.0, Microsoft introduce another 2 great interfaces, called <code>IObservable&lt;T&gt;</code> and <code>IObserver&lt;T&gt;</code>. These two interfaces, just as <code>IEnumerable&lt;T&gt;</code> and <code>IEnumerator&lt;T&gt;</code>, also open a door to the new world for every .net developer. With these 2 interfaces, people can setup a lot of features that corresponding to <code>IEnumerable&lt;T&gt;</code> and <code>IEnumerator&lt;T&gt;</code>.</p>
<p>Now Microsoft has a great library that called Rx(which stands for “Reactive Extension”), which provided a lot of features that similar to LINQ and more based on <code>IObserable&lt;T&gt;</code> and <code>IObserver&lt;T&gt;</code>.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://timnew.me/blog/2011/05/25/push-data-flow-model-in-c-4-0/" data-id="cinedk6ze000fchsib2htw02d" class="article-share-link">Partager</a>
      
        <a href="http://timnew.me/blog/2011/05/25/push-data-flow-model-in-c-4-0/#disqus_thread" class="article-comment-link">Commentaires</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/fp/">FP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linq/">LINQ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/rx/">Rx</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/data-flow/">data flow</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/library/">library</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/push/">push</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/reactive/">reactive</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-sync-notify-pattern-for-wpf-cross-thread-view-model" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2011/04/29/sync-notify-pattern-for-wpf-cross-thread-view-model/" class="article-date">
  <time datetime="2011-04-29T00:00:00.000Z" itemprop="datePublished">2011-04-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">Programming</a>►<a class="article-category-link" href="/categories/programming/wpf/">WPF</a>
  </div>

  </div>
  <div class="article-inner">
    
  
  <div class="ribbon-wrapper relative right">
    <div class="ribbon "  style="background-color: #40A;"  >
      <a href="http://timnew.me/categories/programming/">Programming</a>
    </div>
  </div>


    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2011/04/29/sync-notify-pattern-for-wpf-cross-thread-view-model/">Sync Notify Pattern for WPF Cross Thread View Model</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>WPF has a powerful data binding mechanism, by which it is easy to implement MVVM and MVC pattern for UI application.<br>But thing gets not so beautiful once you introduced multi-thread into the app. Somehow, it means you have to manually call dispatcher method to synchronize the thread context, or else INotifyPropertyChanged contract causes cross thread violation, which is likely to drive UI component throw exception. But tons of calls to Dispatcher.Invoke or Dispatcher.BeginInvoke make you code ugly and hard to maintain. And it is boring to call dispatcher every time you try to write view model properties.</p>
<p>Is there any solution to this embarrassed situation?<br>The answer is Sync Notify pattern.</p>
<p>By analyzing the WPF data binding data flow, you can find the best point to behave the thread synchronization is at the boundary of your code and WPF implementation, which is the property changed  event raiser. To sync the thread context here makes your code clean and effective.</p>
<p>Typically, you might implement the <code>INotifyPropertyChanged</code> in following way:</p>
<figure class="highlight csharp"><figcaption><span>INofityPropertyChanged Implementation</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">region</span> INotifyPropertyChanged Members</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">event</span> PropertyChangedEventHandler PropertyChanged;</span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">Notify</span>(<span class="params"><span class="keyword">string</span> propertyName</span>)</span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (PropertyChanged != <span class="literal">null</span>)</span><br><span class="line">        PropertyChanged(<span class="keyword">this</span>, <span class="keyword">new</span> PropertyChangedEventArgs(propertyName));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endregion</span></span></span><br></pre></td></tr></table></figure>
<p>And you might implement the property of view model as following:</p>
<figure class="highlight csharp"><figcaption><span>Notify Property Decalration</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">region</span> Notify Property ViewModelProperty</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">string</span> viewModelPropertyBackField;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">string</span> ViewModelProperty</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">get</span> &#123; <span class="keyword">return</span> viewModelPropertyBackField; &#125;</span><br><span class="line">    <span class="keyword">set</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (viewModelPropertyBackField == <span class="keyword">value</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        viewModelPropertyBackField = <span class="keyword">value</span>;</span><br><span class="line">        Notify(<span class="string">"ViewModelProperty"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endregion</span></span></span><br></pre></td></tr></table></figure>
<p>This implementation works perfect in single thread context , but fails in multi-thread context. So we introduce a new event raiser implementation, which synchronize the thread context before raising the event:</p>
<figure class="highlight csharp"><figcaption><span>SyncNotify</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">region</span> Sync INotifyPropertyChanged Members</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">SyncNotify</span>(<span class="params"><span class="keyword">string</span> propertyName, <span class="keyword">bool</span> wait = <span class="literal">false</span>, Dispatcher dispatcher = <span class="literal">null</span></span>)</span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (PropertyChanged == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    dispatcher = dispatcher ?? System.Windows.Threading.Dispatcher.CurrentDispatcher;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (dispatcher.Thread == Thread.CurrentThread)</span><br><span class="line">    &#123;</span><br><span class="line">        PropertyChanged(<span class="keyword">this</span>, <span class="keyword">new</span> PropertyChangedEventArgs(propertyName));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (wait)</span><br><span class="line">        &#123;</span><br><span class="line">            dispatcher.Invoke(PropertyChanged, <span class="keyword">this</span>, <span class="keyword">new</span> PropertyChangedEventArgs(propertyName));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            dispatcher.BeginInvoke(PropertyChanged, <span class="keyword">this</span>, <span class="keyword">new</span> PropertyChangedEventArgs(propertyName));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endregion</span></span></span><br></pre></td></tr></table></figure>
<p>This method check the whether it is running on the same thread as dispatcher, it not it synchronize the thread.  It works perfect in most common cases.<br>But this implementation requires you to add some new code to the view model, and requires the event works as a delegate. This restriction sometime hurt, such as when you try to derive your view model from <code>ObservableCollection&lt;T&gt;</code>.<br><code>ObservableCollection&lt;T&gt;</code> declared PropertyChanged event, but implemented it explicitly, which means you won’t be able to raise the event by calling PropertyChanged directly. Instead, you need to call protected method OnPropertyChanged.</p>
<p>In such cases, you need the following implementation powered by extension method:</p>
<figure class="highlight csharp"><figcaption><span>SyncNotifyExtension</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">SyncNotifyExtension</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SyncNotify</span>(<span class="params"><span class="keyword">this</span> INotifyPropertyChanged host, <span class="keyword">string</span> propertyName, Action&lt;PropertyChangedEventArgs&gt; eventRaiser, <span class="keyword">bool</span> wait = <span class="literal">false</span>, Dispatcher dispatcher = <span class="literal">null</span></span>)</span><br><span class="line">    </span>&#123;</span><br><span class="line">        Contract.Requires&lt;ArgumentNullException&gt;(host != <span class="literal">null</span>);</span><br><span class="line">        Contract.Requires&lt;ArgumentException&gt;(<span class="keyword">string</span>.IsNullOrWhiteSpace(propertyName));</span><br><span class="line">        Contract.Requires&lt;ArgumentNullException&gt;(eventRaiser != <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        dispatcher = dispatcher ?? System.Windows.Threading.Dispatcher.CurrentDispatcher;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (dispatcher.Thread == Thread.CurrentThread)</span><br><span class="line">        &#123;</span><br><span class="line">            eventRaiser(<span class="keyword">new</span> PropertyChangedEventArgs(propertyName));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (wait)</span><br><span class="line">            &#123;</span><br><span class="line">                dispatcher.Invoke(eventRaiser, <span class="keyword">new</span> PropertyChangedEventArgs(propertyName));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                dispatcher.BeginInvoke(eventRaiser, <span class="keyword">new</span> PropertyChangedEventArgs(propertyName));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SyncNotify</span>(<span class="params"><span class="keyword">this</span> INotifyPropertyChanged host, <span class="keyword">string</span> propertyName, Action&lt;<span class="keyword">string</span>&gt; eventRaiser, <span class="keyword">bool</span> wait = <span class="literal">false</span>, Dispatcher dispatcher = <span class="literal">null</span></span>)</span><br><span class="line">    </span>&#123;</span><br><span class="line">        Contract.Requires&lt;ArgumentNullException&gt;(host != <span class="literal">null</span>);</span><br><span class="line">        Contract.Requires&lt;ArgumentException&gt;(<span class="keyword">string</span>.IsNullOrWhiteSpace(propertyName));</span><br><span class="line">        Contract.Requires&lt;ArgumentNullException&gt;(eventRaiser != <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        dispatcher = dispatcher ?? System.Windows.Threading.Dispatcher.CurrentDispatcher;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (dispatcher.Thread == Thread.CurrentThread)</span><br><span class="line">        &#123;</span><br><span class="line">            eventRaiser(propertyName);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (wait)</span><br><span class="line">            &#123;</span><br><span class="line">                dispatcher.Invoke(eventRaiser, propertyName);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                dispatcher.BeginInvoke(eventRaiser, propertyName);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SyncNotify</span>(<span class="params"><span class="keyword">this</span> INotifyPropertyChanged host, <span class="keyword">string</span> propertyName, Action&lt;<span class="keyword">object</span>, PropertyChangedEventArgs&gt; eventRaiser, <span class="keyword">bool</span> wait = <span class="literal">false</span>, Dispatcher dispatcher = <span class="literal">null</span></span>)</span><br><span class="line">    </span>&#123;</span><br><span class="line">        Contract.Requires&lt;ArgumentNullException&gt;(host != <span class="literal">null</span>);</span><br><span class="line">        Contract.Requires&lt;ArgumentException&gt;(<span class="keyword">string</span>.IsNullOrWhiteSpace(propertyName));</span><br><span class="line">        Contract.Requires&lt;ArgumentNullException&gt;(eventRaiser != <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        dispatcher = dispatcher ?? System.Windows.Threading.Dispatcher.CurrentDispatcher;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (dispatcher.Thread == Thread.CurrentThread)</span><br><span class="line">        &#123;</span><br><span class="line">            eventRaiser(host, <span class="keyword">new</span> PropertyChangedEventArgs(propertyName));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (wait)</span><br><span class="line">            &#123;</span><br><span class="line">                dispatcher.Invoke(eventRaiser, host, <span class="keyword">new</span> PropertyChangedEventArgs(propertyName));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                dispatcher.BeginInvoke(eventRaiser, host, <span class="keyword">new</span> PropertyChangedEventArgs(propertyName));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SyncNotify</span>(<span class="params"><span class="keyword">this</span> INotifyPropertyChanged host, <span class="keyword">string</span> propertyName, Action&lt;<span class="keyword">object</span>, <span class="keyword">string</span>&gt; eventRaiser, <span class="keyword">bool</span> wait = <span class="literal">false</span>, Dispatcher dispatcher = <span class="literal">null</span></span>)</span><br><span class="line">    </span>&#123;</span><br><span class="line">        Contract.Requires&lt;ArgumentNullException&gt;(host != <span class="literal">null</span>);</span><br><span class="line">        Contract.Requires&lt;ArgumentException&gt;(<span class="keyword">string</span>.IsNullOrWhiteSpace(propertyName));</span><br><span class="line">        Contract.Requires&lt;ArgumentNullException&gt;(eventRaiser != <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        dispatcher = dispatcher ?? System.Windows.Threading.Dispatcher.CurrentDispatcher;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (dispatcher.Thread == Thread.CurrentThread)</span><br><span class="line">        &#123;</span><br><span class="line">            eventRaiser(host, propertyName);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (wait)</span><br><span class="line">            &#123;</span><br><span class="line">                dispatcher.Invoke(eventRaiser, host, propertyName);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                dispatcher.BeginInvoke(eventRaiser, host, propertyName);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>These extension methods can be called inside the view model, and it ensures that the event is raised on the dispatcher thread.<br>Since these extension methods uses delegate to invoke the event raiser, so it is unnecessary to worry about the accessibility of the event raiser, event it is declared as protected or private. And 4 overloads can handle most common event raisers.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://timnew.me/blog/2011/04/29/sync-notify-pattern-for-wpf-cross-thread-view-model/" data-id="cinedk6zd000echsixxb33jll" class="article-share-link">Partager</a>
      
        <a href="http://timnew.me/blog/2011/04/29/sync-notify-pattern-for-wpf-cross-thread-view-model/#disqus_thread" class="article-comment-link">Commentaires</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mvvm/">MVVM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ui/">UI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/wpf/">WPF</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/binding/">binding</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/multithread/">multithread</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/thread/">thread</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/view-model/">view model</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-self-registration-pattern-for-singleton-view-models-in-wpf" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2011/04/27/self-registration-pattern-for-singleton-view-models-in-wpf/" class="article-date">
  <time datetime="2011-04-27T00:00:00.000Z" itemprop="datePublished">2011-04-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">Programming</a>►<a class="article-category-link" href="/categories/programming/wpf/">WPF</a>
  </div>

  </div>
  <div class="article-inner">
    
  
  <div class="ribbon-wrapper relative right">
    <div class="ribbon "  style="background-color: #40A;"  >
      <a href="http://timnew.me/categories/programming/">Programming</a>
    </div>
  </div>


    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2011/04/27/self-registration-pattern-for-singleton-view-models-in-wpf/">Self Registration Pattern for Singleton View Models in WPF</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Where to store the Singleton View Model in WPF application, there are 2 common options:</p>
<h3 id="Store-in-Resource-Dictionary"><a href="#Store-in-Resource-Dictionary" class="headerlink" title="Store in Resource Dictionary."></a>Store in Resource Dictionary.</h3><p>UI Designers prefers to store the WPF View Model into the Resource Dictionary because the objects in Resource Dictionary can be easily referenced in XAML.<br>But Developers must hate that way very much!<br>To fetch the object in Resource Dictionary from code behind must call the “FindResource” method of DependencyObject.  And codes with tons of calls to “FindResource” method are ugly and very low efficient. The situation is worse since the accessibility to object in resource dictionary  is also constrained by the Resource Scope, which means it is almost impossible to fetch the object from business logic.</p>
<h3 id="Store-in-the-Static-Class"><a href="#Store-in-the-Static-Class" class="headerlink" title="Store in the Static Class."></a>Store in the Static Class.</h3><p>I preferred to store the View Model in static class which is available globally. Developer can fetch the object by calling the static method, and designer also can fetch the object by using {x:Static} psudo-tag.<br>But it is still inconvenient somehow for designer, and it is somehow hard to provide design-time mockup data in this way.</p>
<p>For the previous 2 solutions, the pros and cons are obvious. But is it possible to combine these 2 approaches together to gains all the advantages but all the disadvantages.<br>The answer is Self-Registration Pattern.</p>
<p>The basic idea for Self-Registration Pattern is simple. It is obvious that we prefers to store the view models in Resource Dictionary, but we also want to access that object from Code Behind by calling static method.</p>
<p>So I designed the ViewModel class as following:</p>
<figure class="highlight csharp"><figcaption><span>Self-Register View-Model</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ViewModel</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">region</span> Self Registration</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ViewModel Default &#123; <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ViewModel</span>(<span class="params"></span>)</span><br><span class="line">    </span>&#123;</span><br><span class="line">        Default = <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endregion</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><figcaption><span>View-Model Declaration</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">vm:ViewModel</span> <span class="attr">x:Key</span>=<span class="string">"ViewModel"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>You can see, the ViewModel has a globally visible static property named Default, and the class set the Default property to itself in its constructor.<br>Which means once the View Model is initialized in Resource Dictionary, it also set the instance reference to Default,<br>So designer can reference the view model easily with StaticResource Tag</p>
<figure class="highlight xml"><figcaption><span>Reference View-Model from XAML</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Control</span> <span class="attr">Property</span>=<span class="string">"&#123;StaticResource ViewModel&#125;"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>And Developer also can access the view model by calling Static Property</p>
<figure class="highlight csharp"><figcaption><span>Reference View-Model from C#</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ViewModel.Default</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://timnew.me/blog/2011/04/27/self-registration-pattern-for-singleton-view-models-in-wpf/" data-id="cinedk6zb000bchsi5p47otky" class="article-share-link">Partager</a>
      
        <a href="http://timnew.me/blog/2011/04/27/self-registration-pattern-for-singleton-view-models-in-wpf/#disqus_thread" class="article-comment-link">Commentaires</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/wpf/">WPF</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/xaml/">XAML</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pattern/">pattern</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/resource/">resource</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/singleton/">singleton</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/view-model/">view model</a></li></ul>

    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap"><h3 class="widget-title">About Me</h3><div class="widget self-intro"><img src="/images/avatar.png"/><p>Tim is</p><ul class="description"><li>a<span>geek</span></li><li>an spare-time<span>web developer</span></li><li>a part-time<span>mobile developer</span></li><li>a night-time<span>photographer</span></li><li>an early-time<span>pcb solderer</span></li></ul><ul class="social-links"><li><a href="https://linkedin.com/in/timwen" target="_blank" class="linked-in"></a></li><li><a href="https://twitter.com/timnew" target="_blank" class="twitter"></a></li><li><a href="https://github.com/timnew" target="_blank" class="github"></a></li></ul></div></div>
  
    
  <div class="widget-wrap">
    <a href="/posts">
      <h3 class="widget-title">Articles récents</h3>
    </a>
    <div class="widget recent-posts">
      <ul>
        
          <li>
            <a href="/blog/2016/04/23/collection-filtering-algorithm-with-bit-operation-part-1/">Collection Filtering Algorithm with Bit Operation - Part.1</a>
          </li>
        
          <li>
            <a href="/blog/2015/08/14/a-clean-way-to-test-rejected-promise/">A clean way to test rejected promise</a>
          </li>
        
          <li>
            <a href="/blog/2014/12/06/typical-eventbus-design-patterns/">Typical EventBus Design Patterns</a>
          </li>
        
          <li>
            <a href="/blog/2014/11/09/understand-styles-in-android-part-1-what-it-is-for-and-how-to-used-it/">Understand Styles in Android - Part 1. What it is for and how to used it</a>
          </li>
        
          <li>
            <a href="/blog/2014/11/07/walkthrough-untrusted-the-continuing-adventures-of-dr-eval/">Walkthrough: Untrusted - the Continuing Adventures of Dr. Eval</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <a href="/tags">
      <h3 class="widget-title">Nuage de mot-clés</h3>
    </a>
    <div class="widget tagcloud">
      <a href="/tags/net/" style="font-size: 10px;">.net</a> <a href="/tags/alfred/" style="font-size: 10px;">Alfred</a> <a href="/tags/algorithm/" style="font-size: 10px;">Algorithm</a> <a href="/tags/android/" style="font-size: 20px;">Android</a> <a href="/tags/android-studio/" style="font-size: 10px;">Android Studio</a> <a href="/tags/automation/" style="font-size: 10px;">Automation</a> <a href="/tags/binary/" style="font-size: 10px;">Binary</a> <a href="/tags/bit-operation/" style="font-size: 10px;">Bit Operation</a> <a href="/tags/bit-slicer/" style="font-size: 10px;">Bit Slicer</a> <a href="/tags/bloom-filter/" style="font-size: 10px;">Bloom Filter</a> <a href="/tags/boilerplate/" style="font-size: 10px;">Boilerplate</a> <a href="/tags/c/" style="font-size: 20px;">C#</a> <a href="/tags/ci/" style="font-size: 15px;">CI</a> <a href="/tags/css/" style="font-size: 10px;">CSS</a> <a href="/tags/cheat/" style="font-size: 10px;">Cheat</a> <a href="/tags/cheat-engine/" style="font-size: 10px;">Cheat Engine</a> <a href="/tags/class/" style="font-size: 10px;">Class</a> <a href="/tags/cocoa/" style="font-size: 10px;">Cocoa</a> <a href="/tags/collection/" style="font-size: 10px;">Collection</a> <a href="/tags/command/" style="font-size: 10px;">Command</a> <a href="/tags/continues-delivery/" style="font-size: 10px;">Continues Delivery</a> <a href="/tags/continues-integration/" style="font-size: 10px;">Continues Integration</a> <a href="/tags/crack/" style="font-size: 10px;">Crack</a> <a href="/tags/d/" style="font-size: 10px;">D</a> <a href="/tags/debugger/" style="font-size: 10px;">Debugger</a> <a href="/tags/deploy/" style="font-size: 10px;">Deploy</a> <a href="/tags/deployment/" style="font-size: 10px;">Deployment</a> <a href="/tags/design/" style="font-size: 10px;">Design</a> <a href="/tags/design-pattern/" style="font-size: 10px;">Design Pattern</a> <a href="/tags/event/" style="font-size: 10px;">Event</a>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <a href="/categories">
      <h3 class="widget-title">Catégories</h3>
    </a>
    <div class="widget category-list">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/cracking/">Cracking</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/cracking/game/">Game</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/design/">Design</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/design/visual/">Visual</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/design/web/">Web</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/game/">Game</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/game/programming-game/">Programming Game</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/geek-toy/">Geek Toy</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/package/">Package</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/package/chrome-extension/">Chrome Extension</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/package/hexo/">Hexo</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/practice/">Practice</a><span class="category-list-count">22</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/practice/atom/">Atom</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/practice/chrome/">Chrome</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/practice/continues-integration/">Continues Integration</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/practice/devops/">DevOps</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/practice/hexo/">Hexo</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/practice/mac/">Mac</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/practice/shell/">Shell</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/practice/textmate/">TextMate</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/practice/web/">Web</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/practice/windows/">Windows</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/practice/git/">git</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/programming/">Programming</a><span class="category-list-count">73</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/programming/algorithm/">Algorithm</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/programming/android/">Android</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/programming/arduino/">Arduino</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/programming/c/">C#</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/programming/chrome/">Chrome</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/programming/design-patterns/">Design Patterns</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/programming/java/">Java</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/programming/javascript/">JavaScript</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/programming/javascript/coffeescript/">CoffeeScript</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/programming/postgressql/">PostgresSql</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/programming/powershell/">PowerShell</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/programming/regular-expression/">Regular Expression</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/programming/ruby/">Ruby</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/programming/shell/">Shell</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/programming/wpf/">WPF</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/programming/web/">Web</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/programming/node-js/">node.js</a><span class="category-list-count">10</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/thinking/">Thinking</a><span class="category-list-count">5</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <a href="/archives">
      <h3 class="widget-title">Archives</h3>
    </a>
    <div class="widget archive-list">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">December 2013</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">October 2013</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">July 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">June 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">April 2013</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">March 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">February 2013</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11/">November 2012</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/10/">October 2012</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/08/">August 2012</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/07/">July 2012</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/06/">June 2012</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/05/">May 2012</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/04/">April 2012</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/03/">March 2012</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/02/">February 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/10/">October 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/09/">September 2011</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/05/">May 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/04/">April 2011</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/11/">November 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/09/">September 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/04/">April 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/03/">March 2010</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 TimNew<br>
      Propulsé by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/#main" class="mobile-nav-link">Home</a>
  
    <a href="/archives/" class="mobile-nav-link">Archives</a>
  
    <a href="/photos/500px.html" class="mobile-nav-link">Photos</a>
  
</nav>
    
<script>
  var disqus_shortname = 'timnew-github';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script> -->
<script src="//code.jquery.com/jquery-2.1.1.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>